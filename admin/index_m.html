<html>

<head>

    <!-- Load ioBroker scripts and styles-->
    <link rel="stylesheet" type="text/css" href="../../css/adapter.css" />
    <link rel="stylesheet" type="text/css" href="../../lib/css/materialize.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/fancytree/ui.fancytree.min.css" />
    <link type="text/css" rel="stylesheet" href="../../lib/css/themes/jquery-ui/default/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="../../lib/css/iob/selectID.css" />

    <script type="text/javascript" src="../../lib/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery-ui-1.10.3.full.min.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../lib/js/jquery.fancytree-all.min.js"></script>
    <script type="text/javascript" src="../../lib/js/materialize.js"></script>
    <script type="text/javascript" src="../../socket.io/socket.io.js"></script>
    <script type="text/javascript" src="../../lib/js/selectID.js"></script>
    <script type="text/javascript" src="../../js/translate.js"></script>
    <script type="text/javascript" src="../../js/adapter-settings.js"></script>
    <script type="text/javascript" src="words.js"></script>

    <!-- Load our own files -->
    <link rel="stylesheet" type="text/css" href="style.css" />

    <script type="text/javascript">

        let device = [];
        let selectId;
        let alexaID = [];
        let sayitID = [];
        let deviceID = [];
        let whatsappID = [];
        let arrTelegramUser = [];
        let pushoverID = [];
        let customTypeID = [];
        let defaultTypeID = [];
        let valStates = [];
        let alexa = [];
        let sayit = [];
        let devices = [];
        let whatsapp = [];
        let deviceTypes = [];
        // let telegramUserID = [];
        let firstName = []; // telegram firstname user
        let pushover = [];

        let device_counter;
        let alexa_counter;
        let sayit_counter;
        let whatsapp_counter;
        let telegram_counter;
        let pushover_counter;
        // let custom_device_counter;

        let alexaFinal = [];
        let sayitFinal = [];
        let whatsappFinal = [];
        let devicesFinal = [];
        let customTypeIDFinal = [];
        let defaultTypeIDFinal = [];
        let telegramFinal = [];
        let pushoverFinal = [];
        let curDevice = null
        let varTrue = false;


        function loadUser(settings, onChange) {
            $('.value').each(function () {
                const $key = $(this);
                const id = $key.attr('id');
                if ($key.attr('type') === 'checkbox') {
                    // do not call onChange direct, because onChange could expect some arguments
                    $key.prop('checked', settings[id])
                        .on('change', () => onChange())
                        ;
                }
                else {
                    // do not call onChange direct, because onChange could expect some arguments
                    $key.val(settings[id])
                        .on('change', () => onChange())
                        .on('keyup', () => onChange())
                        ;
                };
            });
        };

        // This will be called by the admin adapter when the settings page loads
        function load(settings, onChange) {
            if (!settings) return;

            deviceID = settings.deviceID || []; // device ID native anlegen
            device = settings.device || []; // devices native anlegen
            alexaID = settings.alexaID || []; // alexaID native anlegen 
            sayitID = settings.sayitID || []; // sayit ID native anlegen
            whatsappID = settings.whatsappID || []; // whatsapp ID native anlegen
            pushoverID = settings.pushoverID || []; // pushover ID native anlegen
            customTypeID = settings.customTypeID || [];
            defaultTypeID = settings.defaultTypeID || [];
            device_final = settings.device_final || []; // output -> main.js

            // create own device status
            if (settings.valStates.length === 0) {
                valStates = [{ "stateAction": "in action", "stateStandby": "standby", "stateOff": "off" }];
            } else {
                let objTemp = {};
                objTemp = settings.valStates[0];
                if (objTemp.stateAction === "") {
                    objTemp.stateAction = "in action";
                };
                if (objTemp.stateStandby === "") {
                    objTemp.stateStandby = "standby";
                };
                if (objTemp.stateOff === "") {
                    objTemp.stateOff = "off";
                };
                settings.valStates[0] = objTemp;
                valStates = settings.valStates;
            };

            // counter ID
            console.log(settings.telegram_counter);

            settings.device_counter = ctrlCntr(settings.device_counter);
            settings.alexa_counter = ctrlCntr(settings.alexa_counter);
            settings.sayit_counter = ctrlCntr(settings.sayit_counter);
            settings.whatsapp_counter = ctrlCntr(settings.whatsapp_counter);
            settings.telegram_counter = ctrlCntr(settings.telegram_counter);
            settings.pushover_counter = ctrlCntr(settings.pushover_counter);

            function ctrlCntr(cntr) {
                if (cntr == undefined) {
                    cntr = 0;
                };
                console.log(cntr);
                return cntr;
            };

            device_counter = settings.device_counter;
            alexa_counter = settings.alexa_counter;
            sayit_counter = settings.sayit_counter;
            whatsapp_counter = settings.whatsapp_counter;
            telegram_counter = settings.telegram_counter;
            pushover_counter = settings.pushover_counter;
            custom_device_counter = settings.custom_device_counter;



            let arrAll = [];

            // putType(deviceID, 'deviceID');
            // putType(alexaID, 'alexaID');
            // putType(sayitID, 'sayitID');
            // putType(whatsappID, 'whatsappID');
            // putType(pushoverID, 'pushoverID');

            // async function putType(arr, name) {
            //     if (arr != undefined && arr.length > 0) {
            //         for (const i in arr) {
            //             arr[i].def = name;
            //         };
            //         arrAll.push(arr);
            //         console.warn(arrAll);
            //     }; 
            // };

            // const validateInput = async (arrAll) => {
            //     let arrTemp = [];
            //     console.warn(arrAll);
            //     for (const i in arrAll) {
            //         if (arrAll[i] != undefined && arrAll[i].length > 0) {
            //             for (const j in arrAll[i]) {
            //             }
            //             sendTo(null, "ctrlDevice", arrAll[i], async data => {
            //                 if (data != undefined) test(data);
            //             });
            //         };
            //     };
            // };

            // validateInput(arrAll);

            // const test = async arr => console.warn(arr);


            // // alte Schreibweise
            // let oldFunction = function () {
            //     console.warn('OLD');
            // };
            // // neue Schreibweise
            // let newFunction = () => {
            //     console.warn('NEW');
            // };

            // // neue Schreibweise short + param
            // let newFunction2 = age => console.warn(age);
            // newFunction2(42);

            // let newFunction3 = () => console.warn('test');

            // promise

            readUser();

            loadUser(settings, onChange);

            setTimeout(function () {
                showHeader('dynamicTable', 'idAlexa', alexa);
                showHeader('dynamicTable', 'idsayit', sayit);
                showHeader('dynamicTable', 'idTelegram', firstName);
                showHeader('dynamicTable', 'idWhatsapp', whatsapp);
                showHeader('dynamicTable', 'idPushover', pushover);
            }, 200);

            onChange(false);

            // reinitialize all the Materialize labels on the page if you are dynamically adding inputs:
            setTimeout(function () {
                values2table('deviceID', deviceID, onChange); //deviceID
                values2table('alexaID', alexaID, onChange); //alexa
                values2table('sayitID', sayitID, onChange); //sayit
                values2table('whatsappID', whatsappID, onChange); // whatsapp
                values2table('pushoverID', pushoverID, onChange); // whatsapp

                values2table('customTypeID', customTypeID, onChange); // custom devices
                values2table('defaultTypeID', defaultTypeID, onChange); // custom devices

                values2table('valStates', valStates, onChange)

                $('#disableFirstField').find('td:first-child .values-input').prop('disabled', true);

            }, 200);
            setTimeout(function () {
                $('.changeOnChangeEvent').off('change');
                $('.changeOnChangeEvent').find('*').off('change');
                $('.changeOnChangeEvent').find('*').on('change keyup', function () {

                    $('.btn-save, .btn-save-close').addClass('disabled');
                    $('#fill-dynamic-table, #fill-dynamic-table1').removeClass('disabled');

                });
                createDynamicTable(settings, onChange, device); // create dynamic table "device"
                $('#dynamicTableLoading, #dynamicTableLoadingText').css('display', 'none'); // ladekringel
            }, 2000);

            if (M) M.updateTextFields();

            if (varTrue == false) clickButton(onChange);

        };

        // Load End
        //#################################################################################################################
        // Save Start

        // This will be called by the admin adapter when the user presses the save button
        function save(callback) {
            let obj = {};
            obj = createSettings();

            // create messaging devices
            obj.alexaFinal = createArray(JSON.parse(JSON.stringify(obj.alexaID)), "alexa");
            obj.sayitFinal = createArray(JSON.parse(JSON.stringify(obj.sayitID)), "sayit");
            obj.whatsappFinal = createArray(JSON.parse(JSON.stringify(obj.whatsappID)), "whatsapp");
            obj.customTypeIDFinal = createArray(JSON.parse(JSON.stringify(obj.customTypeID)), "typeID");
            obj.defaultTypeIDFinal = createArray(JSON.parse(JSON.stringify(obj.defaultTypeID)), "typeID");
            obj.telegramFinal = createArray(JSON.parse(JSON.stringify(obj.telegramID)), "telegram");
            obj.pushoverFinal = createArray(JSON.parse(JSON.stringify(obj.pushoverID)), "pushover"); // !!!

            function createArray(obj, type) {
                let objTemp = {};
                for (const id in obj) {
                    if (type === "alexa" || type === "sayit") {
                        timeMin = "";
                        timeMax = "";
                        let timeMinHourTemp = ``;
                        let timeMinMinTemp = ``;
                        let timeMaxHourTemp = ``;
                        let timeMaxMinTemp = ``;
                        if (obj[id].timeMinHour !== ``
                            && obj[id].timeMinMin !== ``
                            && obj[id].timeMaxHour !== ``
                            && obj[id].timeMaxMin !== ``) {
                            timeMinHourTemp = obj[id].timeMinHour;
                            timeMinMinTemp = obj[id].timeMinMin;
                            timeMaxHourTemp = obj[id].timeMaxHour;
                            timeMaxMinTemp = obj[id].timeMaxMin;
                            timeMin = `${timeMinHourTemp}:${timeMinMinTemp}`;
                            timeMax = `${timeMaxHourTemp}:${timeMaxMinTemp}`;
                        };
                        if (obj[id].volume < 0 || obj[id].volume > 100 || obj[id].volume === undefined || obj[id].volume === '') {
                            obj[id].volume = 50;
                        };
                    };

                    switch (type) {
                        case "alexa": {
                            objTemp[obj[id].id] = {
                                name: obj[id].name,
                                path: obj[id].path,
                                volume: obj[id].volume,
                                timeMin: timeMin,
                                timeMax: timeMax
                            };
                            break;
                        };
                        case "sayit": {
                            objTemp[obj[id].id] = {
                                name: obj[id].name,
                                path: obj[id].path,
                                timeMin: timeMin,
                                timeMax: timeMax,
                                volume: obj[id].volume
                            };
                            break;
                        };
                        case "whatsapp": {
                            objTemp[obj[id].id] = {
                                name: obj[id].name,
                                path: obj[id].path,
                            };
                            break;
                        };
                        case "typeID": {
                            objTemp[obj[id].id] = {
                                name: obj[id].name,
                                startVal: obj[id].startVal,
                                endVal: obj[id].endVal,
                                startCount: obj[id].startCount,
                                endCount: obj[id].endCount
                            };
                            break;
                        };
                        case "telegram": {
                            objTemp[obj[id].id] = {
                                name: obj[id].nameFinal,
                                inst: obj[id].inst
                            };
                            break;
                        };
                        case "pushover": {
                            objTemp[obj[id].id] = {
                                name: obj[id].name,
                                inst: obj[id].inst,
                                prio: obj[id].prio,
                                sound: obj[id].sound,
                            };
                            break;
                        };
                    };
                };
                return objTemp;
            };

            obj.devicesFinal = createDevicesFinal(JSON.parse(JSON.stringify(obj.device)), obj.deviceID);

            function createDevicesFinal(obj, arr) {
                let objTemp = {};

                for (const i in obj) {
                    for (const j in arr) {
                        if (obj[i].id == arr[j].id) {
                            if (obj[i].enabled) {

                                objTemp[obj[i].id] = {
                                    name: arr[j].name,
                                    type: arr[j].type,
                                    pathConsumption: arr[j].consumption,
                                    pathSwitch: arr[j].switch,
                                    startText: arr[j].startText,
                                    endText: arr[j].endText,
                                    alexa: obj[i].idAlexa,
                                    sayit: obj[i].idsayit,
                                    whatsapp: obj[i].idWhatsapp,
                                    telegram: obj[i].idTelegram,
                                    autoOff: obj[i].autoOff,
                                    timer: obj[i].idTimer,
                                    abort: obj[i].abort,
                                    id: obj[i].id
                                };
                            };
                        };
                    };
                };
                return objTemp;
            };
            callback(obj);
        };

        function clickButton(onChange) {

            varTrue = true;

            $('#fill-dynamic-table, #fill-dynamic-table1').on('click', () => {
                $('#fill-dynamic-table, #fill-dynamic-table1').addClass('disabled');
                $('#dynamicTableLoading, #dynamicTableLoadingText').css('display', ''); // ladekringel

                settings = createSettings();
                load(settings, onChange);
                onChange(true);
            });
        };

        // functions 

        // function getTelegramUser() {
        //     console.log('telegramUser');
        //     arrTelegramUser = [];
        //     /* Telegram Instanzen ermitteln */
        //     socket.emit('getObjectView', 'system', 'instance', { startkey: 'system.adapter.', endkey: 'system.adapter.\u9999' }, (err, state) => {
        //         if (err) {
        //             console.error(err);
        //         }
        //         else {
        //             let result = [];
        //             let inst = ``;
        //             $.each(state.rows, (index, element) => {
        //                 result.push(element.value);
        //             });
        //             $.each(result, (index, element) => {
        //                 for (let i = 0; i < 10; i++) {
        //                     if (element._id === `system.adapter.telegram.${i}`) {
        //                         inst = `${i}`;
        //                         let arr = { name: `telegram.${i}.communicate.users`, inst: inst };
        //                         arrTelegramUser.push(arr);
        //                     };
        //                 };
        //             });
        //             readUserTelegram(arrTelegramUser);
        //         };
        //     });
        // };

        // function readUserTelegram(arrTelegramUser) {
        //     // telegram auswahl erstellen
        //     console.log(arrTelegramUser.length);
        //     firstName = [];
        //     for (const i in arrTelegramUser) {
        //         socket.emit('getState', arrTelegramUser[i].name, (err, state) => {
        //             if (state !== null || state !== undefined) {
        //                 if (state.val !== ``) {
        //                     $.each(JSON.parse(state.val), (index, element) => {
        //                         let strTemP = ``;
        //                         console.warn(JSON.stringify(element));
        //                         if (element.firstName != undefined && element.firstName !== "" && element.firstName != null) {
        //                             strTemP = `[${arrTelegramUser[i].inst}]${element.firstName}`;
        //                             firstName.push({ name: strTemP, id: telegram_counter, nameFinal: element.firstName, inst: `.${arrTelegramUser[i].inst}` });
        //                             telegram_counter++;
        //                         };
        //                         if (element.userName != undefined && element.userName !== "" && element.userName != null) {
        //                             strTemP = `[${arrTelegramUser[i].inst}]${element.userName}`;
        //                             firstName.push({ name: strTemP, id: telegram_counter, nameFinal: element.userName, inst: `.${arrTelegramUser[i].inst}` });
        //                             telegram_counter++;
        //                         };
        //                     });
        //                 };
        //             };
        //         });
        //     };
        //     console.log(firstName);
        // };

        async function readUser() {

            // getTelegramUser();

            alexa = [];
            sayit = [];
            devices = [];
            whatsapp = [];
            deviceTypes = [];
            pushover = [];
            firstName = [];

            sendTo(null, ['telegram'], telegram_counter, async data => {
                    if (data != undefined) firstName = await data;
                    console.warn(data);
                });


            if (pushoverID.length > 0) {
                sendTo(null, ['1val', 'name'], pushoverID, async data => {
                    if (data != undefined) pushover = await data.checked;
                });
            };
            if (alexaID.length > 0) {
                sendTo(null, ['2val', 'name', 'path'], alexaID, async data => {
                    if (data != undefined) alexa = await data.checked;
                });
            };
            if (sayitID.length > 0) {
                sendTo(null, ['2val', 'name', 'path'], sayitID, async data => {
                    if (data != undefined) sayit = await data.checked;

                });
            };
            if (whatsappID.length > 0) {
                sendTo(null, ['2val', 'name', 'path'], whatsappID, async data => {
                    if (data != undefined) whatsapp = await data.checked;
                });
            };
            if (deviceID.length > 0) {
                sendTo(null, ['3val', 'name', 'consumption', 'switch'], deviceID, async data => {
                    if (data != undefined) devices = await data.checked;
                });
            };


            // deviceType auswahl erstellen
            $.each(defaultTypeID, (index, element) => {
                if (element.name !== "" && element.name != undefined && element.startVal !== "" && element.startVal != undefined && element.endVal !== "" && element.endVal != undefined && element.startCount !== "" && element.startCount != undefined && element.endCount !== "" && element.endCount != undefined) {
                    deviceTypes.push(`${element.name}`);
                };
            });
            $.each(customTypeID, (index, element) => {
                if (element.name !== "" && element.name != undefined && element.startVal !== "" && element.startVal != undefined && element.endVal !== "" && element.endVal != undefined && element.startCount !== "" && element.startCount != undefined && element.endCount !== "" && element.endCount != undefined) {
                    deviceTypes.push(`${element.name}`);
                };
            });
            $('#deviceTypeID').attr("data-options", deviceTypes.join(';'));
        };

        function createDynamicTable(settings, onChange, device) {
            $('#dynamic-table-body').html("");
            for (const i in devices) {
                let ID = devices[i].name;
                let deviceId = devices[i].id;
                curDevice = null
                let data = {};

                device.forEach(function (d) {
                    if (d.deviceName == ID)
                        curDevice = d;
                });

                if (curDevice == null) {
                    curDevice = {
                        enabled: true,
                        deviceName: devices[i].name,
                        idAlexa: 0,
                        idsayit: 0,
                        idWhatsapp: 0,
                        idTelegram: 0,
                        idPushover: 0,
                        autoOff: false,
                        idTimer: 0,
                        abort: false,
                        id: -1
                    };
                };

                data = [
                    { type: 'checkbox', name: "enabled", value: curDevice.enabled },
                    { type: 'label', name: "deviceName", value: curDevice.deviceName },
                    { type: 'multiple', data: alexa, name: "idAlexa", value: curDevice.idAlexa },
                    { type: 'multiple', data: sayit, name: "idsayit", value: curDevice.idsayit },
                    { type: 'multiple', data: firstName, name: "idTelegram", value: curDevice.idTelegram },
                    { type: 'multiple', data: whatsapp, name: "idWhatsapp", value: curDevice.idWhatsapp },
                    { type: 'multiple', data: pushover, name: "idPushover", value: curDevice.idPushover },
                    { type: 'checkbox', name: "autoOff", value: curDevice.autoOff },
                    { type: 'timer', name: "idTimer", value: parseInt(curDevice.idTimer) },
                    { type: 'checkbox', name: "abort", value: curDevice.abort },
                    { type: 'id', name: "id", value: parseInt(deviceId) }
                ];

                let col = "<tr>";
                data.forEach(d => {
                    if (d.data == undefined || d.data.length > 0) {
                        let style = "";
                        if (d.name == "deviceName") {
                            style = 'style="font-weight:bold;"';
                        };

                        col += `<td data-type=${d.type} data-name="${d.name}" ${style}>`;
                        switch (d.type) {
                            case 'checkbox':
                                let checked = '';
                                if (d.value == true || d.value == 'on') {
                                    checked = 'checked="checked"';
                                }
                                col += `<label><input type="checkbox" class="values-input" ${checked} data-old-value="${d.value}"><span></span></label>`;
                                break;
                            case 'label':
                                col += `<span class="values-input" data-old-value="${d.value}">${d.value}</span>`;
                                break;
                            case 'multiple':
                                col += `<select multiple class="values-input" data-old-value="${d.value}">`;
                                d.data.forEach(name => {
                                    let checked = '';
                                    if ($.inArray(name, d.value))
                                        checked = 'selected';
                                    col += `<option ${checked} value='${name.id}'>${name.name}</option>`
                                });
                                col += `</select>`;
                                break;
                            case 'timer':
                                col += `<input type="number" min="0" class="values-input" data-old-value="${d.value}">`;
                                break;
                            case 'id':
                                col += `<span class="values-input" data-old-value="${d.value}">${d.value}</span>`;
                                break;
                            default:
                                col += `Test`;
                                break;
                        };
                        col += `</td>`;
                    };
                });
                col += "</tr>";
                $('#dynamic-table-body').append(col);

                $('#dynamic-table-body').children().eq(i).children().each(function () {
                    if ($(this).data('type') == 'multiple') {
                        $(this).find('select').val(curDevice[$(this).data('name')]);
                    }
                    else {
                        $(this).find('input').val(curDevice[$(this).data('name')]);
                    }
                });

                $('#dynamic-table-body').find('.values-input').on('change', function () {
                    if ($(this).val() != $(this).data('old-value')) {
                        onChange();
                    };
                });
            };
            if (curDevice != null) {
                let selectInstance = M.FormSelect.getInstance($('select'));
                instances = M.FormSelect.init($('select'));
                M.updateTextFields();
            };

            if (settings != null && settings != undefined)
                loadUser(settings, onChange);

        };

        function createSettings() {
            console.warn()

            let obj = {};
            obj.deviceID = null;
            obj.deviceID = table2values('deviceID');
            obj.alexaID = table2values('alexaID');
            obj.sayitID = table2values('sayitID');
            console.log(firstName);
            obj.telegramID = firstName; // telegram namen sichern

            obj.whatsappID = table2values('whatsappID');
            obj.customTypeID = table2values('customTypeID');
            obj.defaultTypeID = table2values('defaultTypeID');
            obj.valStates = table2values('valStates');
            obj.pushoverID = table2values('pushoverID'); // !!!

            obj.deviceID = createId(obj.deviceID, device_counter, "device_counter");
            obj.alexaID = createId(obj.alexaID, alexa_counter, "alexa_counter");
            obj.sayitID = createId(obj.sayitID, sayit_counter, "sayit_counter");
            obj.whatsappID = createId(obj.whatsappID, whatsapp_counter, "whatsapp_counter");
            // obj.telegramID = createId(obj.whatsappID, telegram_counter, "telegram_counter");
            obj.pushoverID = createId(obj.pushoverID, pushover_counter, "pushover_counter");

            pushover_counter

            function createId(array, counter, counter_name) {
                for (const i in array) {
                    if (array[i].id == "") {
                        array[i].id = counter;
                        counter++;
                    };
                };
                obj[counter_name] = counter;
                return array;
            };

            let body = $('#dynamic-table-body');
            let geraete = [];

            body.children().each(function () {

                let data = {};
                $(this).children().each(function () {
                    let value;
                    if ($(this).data('type') == 'multiple') {
                        value = $(this).find('select').val();
                        $(this).find('select').data('old-value', value);
                    }
                    else if ($(this).data('type') == 'label') {
                        value = $(this).find('span').text();
                    }
                    else if ($(this).data('type') == 'checkbox') {
                        value = $(this).find('input').prop('checked');
                        $(this).find('input').data('old-value', value);
                    }
                    else if ($(this).data('type') == 'id') {
                        value = $(this).find('span').text();
                    }
                    else {
                        value = $(this).find('input').val();
                        $(this).find('input').data('old-value', value);
                    };
                    data[$(this).data('name')] = value;

                });
                geraete.push(data);
            });
            obj.device = geraete;
            return obj;
        };

        function showHeader(tblId, columnName, arr) {
            if (arr.length > 0) {
                $('#' + tblId + ' [data-name="' + columnName + '"]').css('display', 'table-cell');
            }
            else {
                $('#' + tblId + ' [data-name="' + columnName + '"]').css('display', 'none');
            }
        }

    </script>
</head>

<body>
    <div class="m adapter-container">
        <div class="row">
            <!-- Tabs: Menu -->
            <div class="col s12"
                style="padding-left:0;padding-right:0; margin-top: 0px; margin-bottom: 1px; background-color:#174475; box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);">
                <ul class="tabs blue lighten-4">
                    <li class="tab col s3"><a href="#tab-config" class="translate">Config</a></li>
                    <li class="tab col s3"><a href="#tab-devices" class="translate">Devices</a></li>
                    <li class="tab col s3"><a href="#tab-type" class="translate">Type</a></li>
                </ul>
            </div>

            <!-- Tab id "devices" -->
            <div id="tab-devices" class="col s12">
                <div class="row">
                    <div class="col s12" id="device">
                        <div class="row">
                            <div class="input-field col s3">
                                <img src="icon.png">
                            </div>
                            <div class="col s4">
                                <div class="card">
                                    <div class="card-panel blue lighten-5">
                                        <span class="card-title">

                                            If the following button is blue, it must be clicked once. This will update
                                            the table.</span>
                                        <p><a id="fill-dynamic-table"
                                                class="btn-save waves-effect waves-light btn disabled">Click
                                                here to
                                                refresh table</a></p>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div id="valStates">
                                <div class="col s6">
                                    <div class="card">
                                        <div class="card-panel blue lighten-5">
                                            <div>
                                                <h5>Configure your own device status</h5>
                                            </div>
                                            <table class="table-values changeOnChangeEvent remove-first-column">
                                                <thead>
                                                    <tr>
                                                        <th class="header translate" style="width: 0px; display: none;">
                                                        </th>
                                                        <th class="header translate" data-type="text"
                                                            data-name="stateAction">status: "in
                                                            action"</th>
                                                        <th class="header translate" data-type="text"
                                                            data-name="stateStandby">status: "in
                                                            standby"</th>
                                                        <th class="header translate" data-type="text"
                                                            data-name="stateOff">
                                                            status: "device
                                                            off"</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- <div id="valStates1">
                                <div class="col s6">
                                    <div class="card">
                                        <div class="card-panel blue lighten-5">
                                            <div>
                                                <h5>Configure your own device status</h5>
                                            </div>
                                            <table class="table-values changeOnChangeEvent remove-first-column">
                                                <thead>
                                                    <tr>
                                                        <th class="header translate" style="width: 0px; display: none;">
                                                        </th>
                                                        <th class="header translate" data-type="text"
                                                            data-name="stateAction">status: "in
                                                            action"</th>
                                                        <th class="header translate" data-type="text"
                                                            data-name="stateStandby">status: "in
                                                            standby"</th>
                                                        <th class="header translate" data-type="text"
                                                            data-name="stateOff">
                                                            status: "device
                                                            off"</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                        </div>

                        <!-- dynamic table -->
                        <div class="card-panel blue lighten-5">
                            <table id="dynamicTable" class="table-values changeOnChangeEvent remove-last-column">
                                <thead>
                                    <tr>
                                        <th class="header translate" data-name="enabled" style="width: 60px">active
                                        </th>
                                        <th class="header translate" data-name="deviceName">device name</th>
                                        <th class="header translate" data-name="idAlexa">Device alexa</th>
                                        <th class="header translate" data-name="idsayit">Device SayIt</th>
                                        <th class="header translate" data-name="idTelegram">telegram user</th>
                                        <th class="header translate" data-name="idWhatsapp">whatsapp user</th>
                                        <th class="header translate" data-name="idPushover">pushover user</th>
                                        <th class="header translate" data-name="autoOff" style="width: 60px">autooff
                                        </th>
                                        <th class="header translate" data-name="idTimer" style="width: 60px">timeout in
                                            min</th>
                                        <th class="header translate" data-name="abort" style="width: 80px">abort
                                            <br>detection
                                        </th>
                                        <th class="header translate" data-name="id" style="width: 0px; display: none;">
                                            id</th>
                                    </tr>
                                </thead>
                                <tbody id="dynamic-table-body" class="table-values">
                                </tbody>
                            </table>
                            <div id="dynamicTableLoading" class="preloader-wrapper big active" style="margin: auto">
                                <div class="spinner-layer spinner-blue-only">
                                    <div class="circle-clipper left">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="gap-patch">
                                        <div class="circle"></div>
                                    </div>
                                    <div class="circle-clipper right">
                                        <div class="circle"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="dynamicTableLoadingText" style="margin: auto">
                                Please wait while table is loading
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab with id "config" -->
            <div id="tab-config" class="col s12">
                <div class="row">
                    <div class="col s12" id="deviceID">
                        <div class="row">
                            <div class="input-field col s3">
                                <img src="icon.png">
                            </div>
                            <div class="col s4">
                                <div class="card">
                                    <div class="card-panel blue lighten-5">
                                        <span class="card-title">
                                            After done pls click the following button</span>
                                        <p><a id="fill-dynamic-table1"
                                                class="btn-save waves-effect waves-light btn disabled">Click
                                                here to
                                                safe config</a></p>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card-panel blue lighten-5">
                            <div class="row">
                                <div class="col left">
                                    <a class="btn-floating waves-effect waves-light blue table-button-add"><i
                                            class="material-icons">add</i></a> <b>add device</b>
                                </div>
                            </div>
                            <b>*Required fields</b>
                            <table class="table-values changeOnChangeEvent remove-last-column">
                                <thead>
                                    <tr>
                                        <th data-name="_index" style="width: 40px" class="header translate">nr</th>
                                        <th data-name="name" data-type="text" class="header translate">*device
                                            name
                                        </th>
                                        <th id="deviceTypeID" data-name="type" style="width: 200px;" data-type="select"
                                            style="width: 150px" class="header translate" data-default="no device"
                                            data-options="">
                                            *device type</th>
                                        <th data-name="consumption" data-type="OID" class="header translate">
                                            *path<br>consumption/energy</th>
                                        <th data-name="switch" data-type="OID" class="header translate">
                                            path<br>switch on/off</th>
                                        <th data-name="startText" data-type="OID" class="header translate">Starttext
                                        </th>
                                        <th data-name="endText" data-type="OID" class="header translate">Endtext</th>
                                        <th data-buttons="delete" style="width: 80px;" class="header translate">delete
                                        </th>
                                        <th data-name="id" style="width: 0px; display: none;" class="header translate">
                                            id
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>

                    <!-- alexa id  -->
                    <div class="col s12" id="alexaID">
                        <div class="card-panel blue lighten-5">
                            <div class="row">
                                <div class="col left">
                                    <a class="btn-floating waves-effect waves-light blue table-button-add"><i
                                            class="material-icons">add</i></a> <b>add alexa device</b>
                                </div>
                            </div>
                            <b>*Required fields</b>
                            <table class="table-values changeOnChangeEvent remove-last-column">
                                <thead>
                                    <tr>
                                        <th data-name="_index" style="width: 40px" class="header translate">nr</th>
                                        <th data-name="name" data-type="text" class="header translate">*alexa
                                            name
                                        </th>
                                        <th data-name="path" data-type="OID" class="header translate">*alexa
                                            path
                                            <br>"announcement"/"speak"
                                        </th>
                                        <th data-name="volume" style="width: 80px" data-type="number"
                                            class="header translate" data-default="50">volume <br> 0-100</th>
                                        <th data-name="timeMinHour" style="width: 80px" data-type="select"
                                            class="header translate" data-default="0"
                                            data-options="0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23">
                                            time <br>active hour</th>
                                        <th data-name="timeMinMin" style="width: 80px" data-type="select"
                                            class="header translate" data-default="00" data-options="00;15;30;45">
                                            time
                                            <br>active min
                                        </th>
                                        <th data-name="timeMaxHour" style="width: 80px" data-type="select"
                                            class="header translate" data-default="23"
                                            data-options="0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23">
                                            time <br>inactive hour</th>
                                        <th data-name="timeMaxMin" style="width: 80px" data-type="select"
                                            class="header translate" data-default="59" data-options="00;15;30;45;59">
                                            time
                                            <br>inactive min
                                        </th>
                                        <th data-buttons="delete" style="width: 80px" class="header translate">
                                            delete
                                        </th>
                                        <th data-name="id" style="width: 0px; display: none;" class="header translate">
                                            id
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>

                    <!-- sayIt id -->
                    <div class="col s12" id="sayitID">
                        <div class="card-panel blue lighten-5">
                            <div class="row">
                                <div class="col left">
                                    <a class="btn-floating waves-effect waves-light blue table-button-add"><i
                                            class="material-icons">add</i></a> <b>add sayIt device</b>
                                </div>
                            </div>
                            <b>*Required fields</b>
                            <table class="table-values changeOnChangeEvent remove-last-column">
                                <thead>
                                    <tr>
                                        <th data-name="_index" style="width: 40px" class="header translate">nr</th>
                                        <th data-name="name" data-type="text" class="header translate">*sayit name
                                        </th>
                                        <th data-name="path" data-type="OID" class="header translate">*sayit path
                                            <br>"../text"
                                        </th>
                                        <th data-name="volume" style="width: 80px" data-type="number"
                                            class="header translate" data-default="50">volume <br> 0-100</th>
                                        <th data-name="timeMinHour" style="width: 80px" data-type="select"
                                            class="header translate" data-default="0"
                                            data-options="0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23">
                                            time <br>active hour</th>
                                        <th data-name="timeMinMin" style="width: 80px" data-type="select"
                                            class="header translate" data-default="00" data-options="00;15;30;45">time
                                            <br>active min
                                        </th>
                                        <th data-name="timeMaxHour" style="width: 80px" data-type="select"
                                            class="header translate" data-default="23"
                                            data-options="0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19;20;21;22;23">
                                            time <br>inactive hour</th>
                                        <th data-name="timeMaxMin" style="width: 80px" data-type="select"
                                            class="header translate" data-default="59" data-options="00;15;30;45;59">
                                            time
                                            <br>inactive min
                                        </th>
                                        <th data-buttons="delete" style="width: 80px" class="header translate">delete
                                        </th>
                                        <th data-name="id" style="width: 0px; display: none;" class="header translate">
                                            id
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>

                    <!-- whatsapp id  -->
                    <div class="col s12" id="whatsappID">
                        <div class="card-panel blue lighten-5">
                            <div class="row">
                                <div class="col left">
                                    <a class="btn-floating waves-effect waves-light blue table-button-add"><i
                                            class="material-icons">add</i></a> <b>add whatsapp user</b>
                                </div>
                            </div>
                            <b>*Required fields</b>
                            <table class="table-values changeOnChangeEvent remove-last-column">
                                <thead>
                                    <tr>
                                        <th data-name="_index" style="width: 40px" class="header translate">nr</th>
                                        <th data-name="name" data-type="text" class="header translate">*whatsapp
                                            name
                                        </th>
                                        <th data-name="path" data-type="OID" class="header translate">*whatsapp
                                            path
                                            <br>"sendMessage"
                                        </th>
                                        <th data-buttons="delete" style="width: 80px" class="header translate">
                                            delete
                                        </th>
                                        <th data-name="id" style="width: 0px; display: none;" class="header translate">
                                            id
                                        </th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>

                    <!-- pushover id  -->
                    <div class="col s12" id="pushoverID">
                        <div class="card-panel blue lighten-5">
                            <div class="row">
                                <div class="col left">
                                    <a class="btn-floating waves-effect waves-light blue table-button-add"><i
                                            class="material-icons">add</i></a> <b>add pushover user</b>
                                </div>
                            </div>
                            <b>*Required fields</b>
                            <table class="table-values changeOnChangeEvent remove-last-column">
                                <thead>
                                    <tr>
                                        <th data-name="_index" style="width: 40px" class="header translate">nr</th>
                                        <th data-name="name" data-type="text" class="header translate">*pushover name
                                        </th>
                                        <th data-name="inst" data-type="select" class="header translate"
                                            data-default=".0" data-options=".0;.1;.2;.3;.4;.5">*pushover instance</th>
                                        <th data-name="prio" data-type="select" class="header translate"
                                            data-default="normal" data-options="normal; high; quiet">priority</th>
                                        <th data-name="sound" data-type="select" class="header translate"
                                            data-default="pushover" data-options="pushover; bike; bugle; cashregister; classical; cosmic; falling; gamelan; 
                                            incoming; intermission; magic; mechanical; pianobar; siren; spacealarm; tugboat; alien; 
                                            climb; persistent; echo; updown; none">
                                            sound</th>
                                        <th data-buttons="delete" style="width: 80px" class="header translate">delete
                                        </th>
                                        <th data-name="id" style="width: 0px; display: none;" class="header translate">
                                            id</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>


                </div>
            </div>

            <!-- Tab id "type" -->
            <div id="tab-type" class="col s12">
                <div class="row">
                    <div class="col s12" id="device_type">
                        <div class="row">
                            <div class="input-field col s3">
                                <img src="icon.png">
                            </div>
                            <div class="col s4">
                                <div class="card">
                                    <div class="card-panel red lighten-5">
                                        <span class="card-title">
                                            Changes of the values can lead to the fact that devices are no longer
                                            recognized correctly!</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- table "default " -->
                        <div class="col s12" id="defaultTypeID">
                            <div class="card-panel blue lighten-5">
                                <div>
                                    <h3>default devices</h3>
                                </div>
                                <table id="disableFirstField" class="table-values remove-last-column">
                                    <thead>
                                        <tr>
                                            <th id="disableFirstField" class="header translate" data-type="text"
                                                data-name="name">type name</th>
                                            <th class="header translate" data-type="number" data-name="startVal">
                                                Starting value</th>
                                            <th class="header translate" data-type="number" data-name="endVal">Final
                                                value</th>
                                            <th class="header translate" data-type="number" data-name="startCount">
                                                Number of values
                                                ​​ "start"
                                            </th>
                                            <th class="header translate" data-type="number" data-name="endCount">Number
                                                of values ​"end"
                                            </th>
                                            <th class="header translate" data-type="number" data-name="id"
                                                style="width: 0px; display: none;">
                                                id</th>
                                        </tr>
                                    </thead>
                                    </tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- table "custom " -->
                        <div class="col s12" id="customTypeID">
                            <div class="card-panel blue lighten-5">
                                <div>
                                    <h3>custom devices</h3>
                                </div>
                                <table id="disableFirstField" class="table-values remove-last-column">
                                    <thead>
                                        <tr>
                                            <th class="header translate" data-type="text" data-name="name">type name
                                            </th>
                                            <th class="header translate" data-type="number" data-name="startVal">
                                                Starting value</th>
                                            <th class="header translate" data-type="number" data-name="endVal">Final
                                                value</th>
                                            <th class="header translate" data-type="number" data-name="startCount">
                                                Number of values
                                                ​​ "start"</th>
                                            <th class="header translate" data-type="number" data-name="endCount">Number
                                                of values ​"end"
                                            </th>
                                            <th class="header translate" data-type="number" data-name="id"
                                                style="width: 0px; display: none;">id</th>
                                        </tr>
                                    </thead>
                                    </tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="m material-dialogs">
        <div id="dialog-select-member" class="modal modal-fixed-footer">
            <div class="modal-content">
                <div class="row">
                    <div class="col s12 title"></div>
                </div>
                <div class="row">
                    <div class="col s12 dialog-content"></div>
                </div>
            </div>
            <div class="modal-footer">
                <a class="modal-action modal-close waves-effect waves-green btn btn-set"><i
                        class="large material-icons left">check</i><span class="translate">Select</span></a>
                <a class="modal-action modal-close waves-effect waves-green btn btn-close"><i
                        class="large material-icons left ">close</i><span class="translate">Cancel</span></a>
            </div>
        </div>
    </div>
</body>

</html>